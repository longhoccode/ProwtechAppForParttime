{"ast":null,"code":"import _objectSpread from\"E:/5.FILE LINH TINH/CODESPACE/prowtech-app/frontend-web/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// File: StoreListPage.jsx\nimport React,{useState,useEffect,useCallback,useMemo}from\"react\";import api from\"../services/api\";import StoreDetailModal from\"../components/modal/StoreDetailModal\";import DataTable from\"../components/DataTable\";import LoadingMessage from\"../components/LoadingMessage\";import ErrorMessage from\"../components/ErrorMessage\";import FilterBar from\"../components/FilterBar\";import{provinces,districtMap}from\"../constants/locationData\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function StoreListPage(){const[stores,setStores]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(\"\");const[isModalOpen,setIsModalOpen]=useState(false);const[selectedStore,setSelectedStore]=useState(null);// Filter state\nconst[filters,setFilters]=useState({province:\"\",district:\"\",search:\"\"});// Fetch stores from API\nconst fetchStores=useCallback(async()=>{try{setLoading(true);setError(\"\");const response=await api.get(\"/stores\");setStores(response.data.data);}catch(err){console.error(\"❌ Fetch stores error:\",err);setError(\"Failed to fetch stores.\");}finally{setLoading(false);}},[]);useEffect(()=>{fetchStores();},[fetchStores]);const handleOpenModal=store=>{setSelectedStore(store);setIsModalOpen(true);};// District options based on selected province\nconst districtOptions=filters.province?districtMap[filters.province]||[]:[];// Filtered stores\nconst filteredStores=useMemo(()=>{return stores.filter(store=>{const matchProvince=filters.province?store.district===filters.province:true;const matchDistrict=filters.district?store.district_raw===filters.district:true;const matchSearch=(store.board_name||\"\").toLowerCase().includes(filters.search.toLowerCase())||(store.store_code||\"\").toLowerCase().includes(filters.search.toLowerCase())||(store.address||\"\").toLowerCase().includes(filters.search.toLowerCase());return matchProvince&&matchDistrict&&matchSearch;});},[stores,filters]);return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"page-header\",children:/*#__PURE__*/_jsx(\"h2\",{className:\"page-title\",children:\"Store Management\"})}),/*#__PURE__*/_jsx(FilterBar,{filters:[{name:\"province\",type:\"select\",label:\"Province\",options:[{value:\"\",label:\"Tỉnh/TP\"},...provinces]},{name:\"district\",type:\"select\",label:\"District\",options:[{value:\"\",label:\"Quận/Huyện\"},...districtOptions]},{name:\"search\",type:\"text\",label:\"Search\",placeholder:\"Name, code, or address...\"}],values:filters,onChange:(name,value)=>setFilters(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:value},name===\"province\"?{district:\"\"}:{}))}),loading&&/*#__PURE__*/_jsx(LoadingMessage,{message:\"Loading stores...\"}),/*#__PURE__*/_jsx(ErrorMessage,{message:error}),!loading&&!error&&/*#__PURE__*/_jsx(DataTable,{columns:[{label:\"Store Chain\"},{label:\"Store Code\"},{label:\"Address\"},{label:\"District\"},{label:\"Province\"},{label:\"Status\"},{label:\"Actions\",className:\"table-actions\"}],data:filteredStores,renderRow:store=>{var _districtMap$store$di,_districtMap$store$di2;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:store.board_name}),/*#__PURE__*/_jsx(\"td\",{children:store.store_code}),/*#__PURE__*/_jsx(\"td\",{id:\"address\",children:store.address}),/*#__PURE__*/_jsx(\"td\",{children:((_districtMap$store$di=districtMap[store.district])===null||_districtMap$store$di===void 0?void 0:(_districtMap$store$di2=_districtMap$store$di.find(d=>d.value===store.district_raw))===null||_districtMap$store$di2===void 0?void 0:_districtMap$store$di2.label)||store.district_raw}),/*#__PURE__*/_jsx(\"td\",{children:store.district}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"badge \".concat(store.is_active?\"badge-success\":\"badge-error\"),children:store.is_active?\"Active\":\"Inactive\"})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"table-actions\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline btn-sm\",onClick:()=>handleOpenModal(store),children:\"View\"})})})]},store.id);}}),/*#__PURE__*/_jsx(StoreDetailModal,{isOpen:isModalOpen,onClose:()=>setIsModalOpen(false),store:selectedStore})]});}export default StoreListPage;","map":{"version":3,"names":["React","useState","useEffect","useCallback","useMemo","api","StoreDetailModal","DataTable","LoadingMessage","ErrorMessage","FilterBar","provinces","districtMap","jsx","_jsx","jsxs","_jsxs","StoreListPage","stores","setStores","loading","setLoading","error","setError","isModalOpen","setIsModalOpen","selectedStore","setSelectedStore","filters","setFilters","province","district","search","fetchStores","response","get","data","err","console","handleOpenModal","store","districtOptions","filteredStores","filter","matchProvince","matchDistrict","district_raw","matchSearch","board_name","toLowerCase","includes","store_code","address","className","children","name","type","label","options","value","placeholder","values","onChange","prev","_objectSpread","message","columns","renderRow","_districtMap$store$di","_districtMap$store$di2","id","find","d","concat","is_active","onClick","isOpen","onClose"],"sources":["E:/5.FILE LINH TINH/CODESPACE/prowtech-app/frontend-web/src/pages/StoreListPage.js"],"sourcesContent":["// File: StoreListPage.jsx\r\nimport React, { useState, useEffect, useCallback, useMemo } from \"react\";\r\nimport api from \"../services/api\";\r\nimport StoreDetailModal from \"../components/modal/StoreDetailModal\";\r\nimport DataTable from \"../components/DataTable\";\r\nimport LoadingMessage from \"../components/LoadingMessage\";\r\nimport ErrorMessage from \"../components/ErrorMessage\";\r\nimport FilterBar from \"../components/FilterBar\";\r\nimport { provinces, districtMap } from \"../constants/locationData\";\r\n\r\nfunction StoreListPage() {\r\n  const [stores, setStores] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(\"\");\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n  const [selectedStore, setSelectedStore] = useState(null);\r\n\r\n  // Filter state\r\n  const [filters, setFilters] = useState({\r\n    province: \"\",\r\n    district: \"\",\r\n    search: \"\",\r\n  });\r\n\r\n  // Fetch stores from API\r\n  const fetchStores = useCallback(async () => {\r\n    try {\r\n      setLoading(true);\r\n      setError(\"\");\r\n      const response = await api.get(\"/stores\");\r\n      setStores(response.data.data);\r\n    } catch (err) {\r\n      console.error(\"❌ Fetch stores error:\", err);\r\n      setError(\"Failed to fetch stores.\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    fetchStores();\r\n  }, [fetchStores]);\r\n\r\n  const handleOpenModal = (store) => {\r\n    setSelectedStore(store);\r\n    setIsModalOpen(true);\r\n  };\r\n\r\n  // District options based on selected province\r\n  const districtOptions = filters.province ? districtMap[filters.province] || [] : [];\r\n\r\n  // Filtered stores\r\n  const filteredStores = useMemo(() => {\r\n    return stores.filter((store) => {\r\n      const matchProvince = filters.province ? store.district === filters.province : true;\r\n      const matchDistrict = filters.district ? store.district_raw === filters.district : true;\r\n      const matchSearch =\r\n        (store.board_name || \"\").toLowerCase().includes(filters.search.toLowerCase()) ||\r\n        (store.store_code || \"\").toLowerCase().includes(filters.search.toLowerCase()) ||\r\n        (store.address || \"\").toLowerCase().includes(filters.search.toLowerCase());\r\n      return matchProvince && matchDistrict && matchSearch;\r\n    });\r\n  }, [stores, filters]);\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <div className=\"page-header\">\r\n        <h2 className=\"page-title\">Store Management</h2>\r\n      </div>\r\n\r\n      {/* FilterBar */}\r\n      <FilterBar\r\n        filters={[\r\n          {\r\n            name: \"province\",\r\n            type: \"select\",\r\n            label: \"Province\",\r\n            options: [{ value: \"\", label: \"Tỉnh/TP\" }, ...provinces],\r\n          },\r\n          {\r\n            name: \"district\",\r\n            type: \"select\",\r\n            label: \"District\",\r\n            options: [{ value: \"\", label: \"Quận/Huyện\" }, ...districtOptions],\r\n          },\r\n          {\r\n            name: \"search\",\r\n            type: \"text\",\r\n            label: \"Search\",\r\n            placeholder: \"Name, code, or address...\",\r\n          },\r\n        ]}\r\n        values={filters}\r\n        onChange={(name, value) =>\r\n          setFilters((prev) => ({\r\n            ...prev,\r\n            [name]: value,\r\n            ...(name === \"province\" ? { district: \"\" } : {}),\r\n          }))\r\n        }\r\n      />\r\n\r\n      {loading && <LoadingMessage message=\"Loading stores...\" />}\r\n      <ErrorMessage message={error} />\r\n\r\n      {!loading && !error && (\r\n        <DataTable\r\n          columns={[\r\n            { label: \"Store Chain\" },\r\n            { label: \"Store Code\" },\r\n            { label: \"Address\" },\r\n            { label: \"District\" },\r\n            { label: \"Province\" },\r\n            { label: \"Status\" },\r\n            { label: \"Actions\", className: \"table-actions\" },\r\n          ]}\r\n          data={filteredStores}\r\n          renderRow={(store) => (\r\n            <tr key={store.id}>\r\n              <td>{store.board_name}</td>\r\n              <td>{store.store_code}</td>\r\n              <td id=\"address\">{store.address}</td>\r\n              <td>{districtMap[store.district]?.find((d) => d.value === store.district_raw)?.label || store.district_raw}</td>\r\n              <td>{store.district}</td>             \r\n              <td>\r\n                <span className={`badge ${store.is_active ? \"badge-success\" : \"badge-error\"}`}>\r\n                  {store.is_active ? \"Active\" : \"Inactive\"}\r\n                </span>\r\n              </td>\r\n              <td>\r\n                <div className=\"table-actions\">\r\n                  <button\r\n                    className=\"btn btn-outline btn-sm\"\r\n                    onClick={() => handleOpenModal(store)}\r\n                  >\r\n                    View\r\n                  </button>\r\n                </div>\r\n              </td>\r\n            </tr>\r\n          )}\r\n        />\r\n      )}\r\n\r\n      <StoreDetailModal\r\n        isOpen={isModalOpen}\r\n        onClose={() => setIsModalOpen(false)}\r\n        store={selectedStore}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default StoreListPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}