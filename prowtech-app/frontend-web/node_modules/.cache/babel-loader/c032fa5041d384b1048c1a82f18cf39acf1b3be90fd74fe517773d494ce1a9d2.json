{"ast":null,"code":"var _jsxFileName = \"E:\\\\5.FILE LINH TINH\\\\ProwtechMobileApp\\\\prowtech-app\\\\frontend-web\\\\src\\\\components\\\\StoresMap.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useCallback, useEffect } from \"react\";\nimport { GoogleMap, useJsApiLoader, InfoWindow, AdvancedMarkerElement } from \"@react-google-maps/api\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst mapContainerStyle = {\n  width: \"100%\",\n  height: \"600px\",\n  borderRadius: \"8px\"\n};\nconst defaultCenter = {\n  lat: 10.7769,\n  lng: 106.7009\n};\nfunction StoresMap({\n  stores\n}) {\n  _s();\n  const {\n    isLoaded\n  } = useJsApiLoader({\n    id: \"google-map-script\",\n    googleMapsApiKey: process.env.REACT_APP_GOOGLE_MAPS_API_KEY\n  });\n  const mapRef = useRef(null);\n  const [selectedStore, setSelectedStore] = useState(null);\n  const markersRef = useRef([]);\n  const onLoad = useCallback(map => {\n    mapRef.current = map;\n  }, []);\n\n  // Tạo AdvancedMarker khi stores thay đổi\n  useEffect(() => {\n    if (!mapRef.current || !isLoaded) return;\n\n    // Xoá markers cũ\n    markersRef.current.forEach(m => m.setMap(null));\n    markersRef.current = [];\n    stores.forEach(store => {\n      const position = {\n        lat: parseFloat(store.latitude),\n        lng: parseFloat(store.longitude)\n      };\n\n      // Tạo nội dung marker tùy biến\n      const markerDiv = document.createElement(\"div\");\n      markerDiv.style.width = \"20px\";\n      markerDiv.style.height = \"20px\";\n      markerDiv.style.borderRadius = \"50%\";\n      markerDiv.style.background = \"#ff4757\";\n      markerDiv.style.boxShadow = \"0 0 10px rgba(255,71,87,0.6)\";\n      markerDiv.style.cursor = \"pointer\";\n      const marker = new window.google.maps.marker.AdvancedMarkerElement({\n        position,\n        map: mapRef.current,\n        content: markerDiv,\n        title: store.display_name || store.name\n      });\n\n      // Click event\n      markerDiv.addEventListener(\"click\", () => {\n        setSelectedStore(store);\n      });\n      markersRef.current.push(marker);\n    });\n  }, [stores, isLoaded]);\n  if (!isLoaded) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Loading Map...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 25\n  }, this);\n  return /*#__PURE__*/_jsxDEV(GoogleMap, {\n    mapContainerStyle: mapContainerStyle,\n    center: defaultCenter,\n    zoom: 12,\n    onLoad: onLoad,\n    options: {\n      mapId: process.env.REACT_APP_GOOGLE_MAP_ID,\n      // Bắt buộc khi dùng AdvancedMarker\n      disableDefaultUI: false,\n      clickableIcons: false\n    },\n    children: selectedStore && /*#__PURE__*/_jsxDEV(InfoWindow, {\n      position: {\n        lat: parseFloat(selectedStore.latitude),\n        lng: parseFloat(selectedStore.longitude)\n      },\n      onCloseClick: () => setSelectedStore(null),\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: selectedStore.display_name || selectedStore.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: selectedStore.address\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 5\n  }, this);\n}\n_s(StoresMap, \"Znur2gx03Q8L2Eu69WPF2Jpg4TA=\", false, function () {\n  return [useJsApiLoader];\n});\n_c = StoresMap;\nexport default _c2 = /*#__PURE__*/React.memo(StoresMap);\nvar _c, _c2;\n$RefreshReg$(_c, \"StoresMap\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"names":["React","useState","useRef","useCallback","useEffect","GoogleMap","useJsApiLoader","InfoWindow","AdvancedMarkerElement","jsxDEV","_jsxDEV","mapContainerStyle","width","height","borderRadius","defaultCenter","lat","lng","StoresMap","stores","_s","isLoaded","id","googleMapsApiKey","process","env","REACT_APP_GOOGLE_MAPS_API_KEY","mapRef","selectedStore","setSelectedStore","markersRef","onLoad","map","current","forEach","m","setMap","store","position","parseFloat","latitude","longitude","markerDiv","document","createElement","style","background","boxShadow","cursor","marker","window","google","maps","content","title","display_name","name","addEventListener","push","children","fileName","_jsxFileName","lineNumber","columnNumber","center","zoom","options","mapId","REACT_APP_GOOGLE_MAP_ID","disableDefaultUI","clickableIcons","onCloseClick","address","_c","_c2","memo","$RefreshReg$"],"sources":["E:/5.FILE LINH TINH/ProwtechMobileApp/prowtech-app/frontend-web/src/components/StoresMap.js"],"sourcesContent":["import React, { useState, useRef, useCallback, useEffect } from \"react\";\r\nimport { GoogleMap, useJsApiLoader, InfoWindow, AdvancedMarkerElement } from \"@react-google-maps/api\";\r\n\r\nconst mapContainerStyle = {\r\n  width: \"100%\",\r\n  height: \"600px\",\r\n  borderRadius: \"8px\",\r\n};\r\n\r\nconst defaultCenter = {\r\n  lat: 10.7769,\r\n  lng: 106.7009,\r\n};\r\n\r\nfunction StoresMap({ stores }) {\r\n  const { isLoaded } = useJsApiLoader({\r\n    id: \"google-map-script\",\r\n    googleMapsApiKey: process.env.REACT_APP_GOOGLE_MAPS_API_KEY,\r\n  });\r\n\r\n  const mapRef = useRef(null);\r\n  const [selectedStore, setSelectedStore] = useState(null);\r\n  const markersRef = useRef([]);\r\n\r\n  const onLoad = useCallback((map) => {\r\n    mapRef.current = map;\r\n  }, []);\r\n\r\n  // Tạo AdvancedMarker khi stores thay đổi\r\n  useEffect(() => {\r\n    if (!mapRef.current || !isLoaded) return;\r\n\r\n    // Xoá markers cũ\r\n    markersRef.current.forEach((m) => m.setMap(null));\r\n    markersRef.current = [];\r\n\r\n    stores.forEach((store) => {\r\n      const position = {\r\n        lat: parseFloat(store.latitude),\r\n        lng: parseFloat(store.longitude),\r\n      };\r\n\r\n      // Tạo nội dung marker tùy biến\r\n      const markerDiv = document.createElement(\"div\");\r\n      markerDiv.style.width = \"20px\";\r\n      markerDiv.style.height = \"20px\";\r\n      markerDiv.style.borderRadius = \"50%\";\r\n      markerDiv.style.background = \"#ff4757\";\r\n      markerDiv.style.boxShadow = \"0 0 10px rgba(255,71,87,0.6)\";\r\n      markerDiv.style.cursor = \"pointer\";\r\n\r\n      const marker = new window.google.maps.marker.AdvancedMarkerElement({\r\n        position,\r\n        map: mapRef.current,\r\n        content: markerDiv,\r\n        title: store.display_name || store.name,\r\n      });\r\n\r\n      // Click event\r\n      markerDiv.addEventListener(\"click\", () => {\r\n        setSelectedStore(store);\r\n      });\r\n\r\n      markersRef.current.push(marker);\r\n    });\r\n  }, [stores, isLoaded]);\r\n\r\n  if (!isLoaded) return <div>Loading Map...</div>;\r\n\r\n  return (\r\n    <GoogleMap\r\n      mapContainerStyle={mapContainerStyle}\r\n      center={defaultCenter}\r\n      zoom={12}\r\n      onLoad={onLoad}\r\n      options={{\r\n        mapId: process.env.REACT_APP_GOOGLE_MAP_ID, // Bắt buộc khi dùng AdvancedMarker\r\n        disableDefaultUI: false,\r\n        clickableIcons: false,\r\n      }}\r\n    >\r\n      {/* InfoWindow cho cửa hàng được chọn */}\r\n      {selectedStore && (\r\n        <InfoWindow\r\n          position={{\r\n            lat: parseFloat(selectedStore.latitude),\r\n            lng: parseFloat(selectedStore.longitude),\r\n          }}\r\n          onCloseClick={() => setSelectedStore(null)}\r\n        >\r\n          <div>\r\n            <h4>{selectedStore.display_name || selectedStore.name}</h4>\r\n            <p>{selectedStore.address}</p>\r\n          </div>\r\n        </InfoWindow>\r\n      )}\r\n    </GoogleMap>\r\n  );\r\n}\r\n\r\nexport default React.memo(StoresMap);\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}