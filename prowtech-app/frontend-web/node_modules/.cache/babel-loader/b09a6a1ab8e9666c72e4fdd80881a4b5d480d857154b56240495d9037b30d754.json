{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\truon\\\\source\\\\repos\\\\QuyLongTruong\\\\ProwtechAppForParttime\\\\prowtech-app\\\\frontend-web\\\\src\\\\components\\\\modal\\\\AssignStoreModal.js\",\n  _s = $RefreshSig$();\n// src/components/AssignStoreModal.jsx\nimport React, { useState, useEffect, useMemo } from \"react\";\nimport BaseModal from \"../BaseModal\";\nimport FilterBar from \"../FilterBar\";\nimport api from \"../../services/api\";\nimport { provinces, districtMap } from \"../../constants/locationData\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction AssignStoreModal({\n  isOpen,\n  onClose,\n  onSave,\n  campaignId,\n  initiallyAssignedIds\n}) {\n  _s();\n  const [allStores, setAllStores] = useState([]);\n  const [selectedStoreIds, setSelectedStoreIds] = useState(new Set());\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(\"\");\n\n  // Filter state\n  const [filters, setFilters] = useState({\n    province: \"all\",\n    district: \"\",\n    search: \"\"\n  });\n  useEffect(() => {\n    if (isOpen) {\n      setFilters({\n        search: \"\",\n        province: \"all\",\n        district: \"\"\n      });\n      setLoading(true);\n      setError(\"\");\n      api.get(\"/stores\").then(res => {\n        setAllStores(res.data.data || []);\n        setSelectedStoreIds(new Set(initiallyAssignedIds));\n      }).catch(() => setError(\"Không thể tải danh sách cửa hàng.\")).finally(() => setLoading(false));\n    }\n  }, [isOpen, initiallyAssignedIds]);\n  const handleToggleStore = id => {\n    setSelectedStoreIds(prev => {\n      const copy = new Set(prev);\n      copy.has(id) ? copy.delete(id) : copy.add(id);\n      return copy;\n    });\n  };\n  const handleSave = async () => {\n    const orig = new Set(initiallyAssignedIds);\n    const curr = selectedStoreIds;\n\n    // danh sách cần thêm & xóa\n    const add = [...curr].filter(id => !orig.has(id));\n    const remove = [...orig].filter(id => !curr.has(id));\n    if (add.length === 0 && remove.length === 0) {\n      onClose(); // không thay đổi thì chỉ đóng modal\n      return;\n    }\n    setLoading(true);\n    setError(\"\");\n    try {\n      await api.post(`/campaigns/${campaignId}/stores/bulk`, {\n        addIds: add,\n        removeIds: remove\n      });\n      onSave();\n    } catch {\n      setError(\"Lưu thay đổi thất bại.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // ✅ helpers: map code -> label\n  const getProvinceLabel = code => {\n    var _provinces$find;\n    return ((_provinces$find = provinces.find(p => p.value === code)) === null || _provinces$find === void 0 ? void 0 : _provinces$find.label) || code;\n  };\n  const getDistrictLabel = (provinceCode, districtCode) => {\n    var _districtMap$province, _districtMap$province2;\n    return ((_districtMap$province = districtMap[provinceCode]) === null || _districtMap$province === void 0 ? void 0 : (_districtMap$province2 = _districtMap$province.find(d => d.value === districtCode)) === null || _districtMap$province2 === void 0 ? void 0 : _districtMap$province2.label) || districtCode;\n  };\n\n  // District options theo province\n  const districtOptions = filters.province && filters.province !== \"all\" ? districtMap[filters.province] || [] : [];\n\n  // Filter config cho FilterBar\n  const filterConfig = [{\n    name: \"search\",\n    label: \"Tìm kiếm\",\n    type: \"text\",\n    placeholder: \"Mã, tên hoặc địa chỉ...\"\n  }, {\n    name: \"province\",\n    label: \"Tỉnh/Thành phố\",\n    type: \"select\",\n    options: [{\n      value: \"all\",\n      label: \"Tất cả\"\n    }, ...provinces]\n  }, {\n    name: \"district\",\n    label: \"Quận/Huyện\",\n    type: \"select\",\n    options: [{\n      value: \"\",\n      label: \"Tất cả\"\n    }, ...districtOptions]\n  }];\n\n  // Lọc danh sách store\n  const filteredStores = useMemo(() => {\n    return allStores.filter(store => {\n      const matchProvince = filters.province === \"all\" || store.district === filters.province;\n      const matchDistrict = filters.district ? store.district_raw === filters.district : true;\n      const text = `${store.board_name || \"\"} ${store.store_code || \"\"} ${store.address || \"\"}`.toLowerCase();\n      const matchSearch = text.includes(filters.search.toLowerCase());\n      return matchProvince && matchDistrict && matchSearch;\n    });\n  }, [allStores, filters]);\n\n  // Select all / deselect all\n  const handleSelectAll = () => {\n    setSelectedStoreIds(prev => {\n      const copy = new Set(prev);\n      filteredStores.forEach(s => copy.add(s.id));\n      return copy;\n    });\n  };\n  const handleDeselectAll = () => {\n    setSelectedStoreIds(prev => {\n      const copy = new Set(prev);\n      filteredStores.forEach(s => copy.delete(s.id));\n      return copy;\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(BaseModal, {\n    isOpen: isOpen,\n    onClose: onClose,\n    title: \"Ph\\xE2n c\\xF4ng c\\u1EEDa h\\xE0ng cho chi\\u1EBFn d\\u1ECBch\",\n    actions: /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-actions-button\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-danger btn-sm\",\n          onClick: handleDeselectAll,\n          disabled: loading,\n          children: \"B\\u1ECF ch\\u1ECDn t\\u1EA5t c\\u1EA3\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-success btn-sm\",\n          onClick: handleSelectAll,\n          disabled: loading,\n          children: \"Ch\\u1ECDn t\\u1EA5t c\\u1EA3\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [\"\\u0110\\xE3 ch\\u1ECDn: \", selectedStoreIds.size, \" / \", allStores.length]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-actions-button\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-danger btn-sm\",\n          onClick: onClose,\n          disabled: loading,\n          children: \"H\\u1EE7y\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-primary btn-sm\",\n          onClick: handleSave,\n          disabled: loading,\n          children: loading ? \"Đang lưu...\" : \"Lưu thay đổi\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true),\n    children: [error && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"alert alert-error\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(FilterBar, {\n      filters: filterConfig,\n      values: filters,\n      onChange: (name, value) => setFilters(prev => ({\n        ...prev,\n        [name]: value\n      })),\n      onReset: () => setFilters({\n        search: \"\",\n        province: \"all\",\n        district: \"\"\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-content\",\n      children: filteredStores.map(store => /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"modal-row\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"checkbox\",\n          checked: selectedStoreIds.has(store.id),\n          onChange: () => handleToggleStore(store.id)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-label\",\n          children: store.store_code\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-value\",\n          id: \"address\",\n          children: store.address\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-value\",\n          children: getDistrictLabel(store.district, store.district_raw)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-value\",\n          children: getProvinceLabel(store.district)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 13\n        }, this)]\n      }, store.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 150,\n    columnNumber: 5\n  }, this);\n}\n_s(AssignStoreModal, \"mb+4wGW+TZXgYJ8DVswv0+TxbAM=\");\n_c = AssignStoreModal;\nexport default AssignStoreModal;\nvar _c;\n$RefreshReg$(_c, \"AssignStoreModal\");","map":{"version":3,"names":["React","useState","useEffect","useMemo","BaseModal","FilterBar","api","provinces","districtMap","jsxDEV","_jsxDEV","Fragment","_Fragment","AssignStoreModal","isOpen","onClose","onSave","campaignId","initiallyAssignedIds","_s","allStores","setAllStores","selectedStoreIds","setSelectedStoreIds","Set","loading","setLoading","error","setError","filters","setFilters","province","district","search","get","then","res","data","catch","finally","handleToggleStore","id","prev","copy","has","delete","add","handleSave","orig","curr","filter","remove","length","post","addIds","removeIds","getProvinceLabel","code","_provinces$find","find","p","value","label","getDistrictLabel","provinceCode","districtCode","_districtMap$province","_districtMap$province2","d","districtOptions","filterConfig","name","type","placeholder","options","filteredStores","store","matchProvince","matchDistrict","district_raw","text","board_name","store_code","address","toLowerCase","matchSearch","includes","handleSelectAll","forEach","s","handleDeselectAll","title","actions","children","className","onClick","disabled","fileName","_jsxFileName","lineNumber","columnNumber","size","values","onChange","onReset","map","checked","_c","$RefreshReg$"],"sources":["C:/Users/truon/source/repos/QuyLongTruong/ProwtechAppForParttime/prowtech-app/frontend-web/src/components/modal/AssignStoreModal.js"],"sourcesContent":["// src/components/AssignStoreModal.jsx\r\nimport React, { useState, useEffect, useMemo } from \"react\";\r\nimport BaseModal from \"../BaseModal\";\r\nimport FilterBar from \"../FilterBar\";\r\nimport api from \"../../services/api\";\r\nimport { provinces, districtMap } from \"../../constants/locationData\";\r\n\r\nfunction AssignStoreModal({\r\n  isOpen,\r\n  onClose,\r\n  onSave,\r\n  campaignId,\r\n  initiallyAssignedIds,\r\n}) {\r\n  const [allStores, setAllStores] = useState([]);\r\n  const [selectedStoreIds, setSelectedStoreIds] = useState(new Set());\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  // Filter state\r\n  const [filters, setFilters] = useState({\r\n    province: \"all\",\r\n    district: \"\",\r\n    search: \"\",\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      setFilters({ search: \"\", province: \"all\", district: \"\" });\r\n      setLoading(true);\r\n      setError(\"\");\r\n      api\r\n        .get(\"/stores\")\r\n        .then((res) => {\r\n          setAllStores(res.data.data || []);\r\n          setSelectedStoreIds(new Set(initiallyAssignedIds));\r\n        })\r\n        .catch(() => setError(\"Không thể tải danh sách cửa hàng.\"))\r\n        .finally(() => setLoading(false));\r\n    }\r\n  }, [isOpen, initiallyAssignedIds]);\r\n\r\n  const handleToggleStore = (id) => {\r\n    setSelectedStoreIds((prev) => {\r\n      const copy = new Set(prev);\r\n      copy.has(id) ? copy.delete(id) : copy.add(id);\r\n      return copy;\r\n    });\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    const orig = new Set(initiallyAssignedIds);\r\n    const curr = selectedStoreIds;\r\n\r\n    // danh sách cần thêm & xóa\r\n    const add = [...curr].filter((id) => !orig.has(id));\r\n    const remove = [...orig].filter((id) => !curr.has(id));\r\n\r\n    if (add.length === 0 && remove.length === 0) {\r\n      onClose(); // không thay đổi thì chỉ đóng modal\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    setError(\"\");\r\n    try {\r\n      await api.post(`/campaigns/${campaignId}/stores/bulk`, {\r\n        addIds: add,\r\n        removeIds: remove,\r\n      });\r\n      onSave();\r\n    } catch {\r\n      setError(\"Lưu thay đổi thất bại.\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n\r\n  // ✅ helpers: map code -> label\r\n  const getProvinceLabel = (code) =>\r\n    provinces.find((p) => p.value === code)?.label || code;\r\n\r\n  const getDistrictLabel = (provinceCode, districtCode) =>\r\n    districtMap[provinceCode]?.find((d) => d.value === districtCode)?.label ||\r\n    districtCode;\r\n\r\n  // District options theo province\r\n  const districtOptions =\r\n    filters.province && filters.province !== \"all\"\r\n      ? districtMap[filters.province] || []\r\n      : [];\r\n\r\n  // Filter config cho FilterBar\r\n  const filterConfig = [\r\n    {\r\n      name: \"search\",\r\n      label: \"Tìm kiếm\",\r\n      type: \"text\",\r\n      placeholder: \"Mã, tên hoặc địa chỉ...\",\r\n    },\r\n    {\r\n      name: \"province\",\r\n      label: \"Tỉnh/Thành phố\",\r\n      type: \"select\",\r\n      options: [{ value: \"all\", label: \"Tất cả\" }, ...provinces],\r\n    },\r\n    {\r\n      name: \"district\",\r\n      label: \"Quận/Huyện\",\r\n      type: \"select\",\r\n      options: [{ value: \"\", label: \"Tất cả\" }, ...districtOptions],\r\n    },\r\n  ];\r\n\r\n  // Lọc danh sách store\r\n  const filteredStores = useMemo(() => {\r\n    return allStores.filter((store) => {\r\n      const matchProvince =\r\n        filters.province === \"all\" || store.district === filters.province;\r\n      const matchDistrict = filters.district\r\n        ? store.district_raw === filters.district\r\n        : true;\r\n      const text = `${store.board_name || \"\"} ${store.store_code || \"\"} ${\r\n        store.address || \"\"\r\n      }`.toLowerCase();\r\n      const matchSearch = text.includes(filters.search.toLowerCase());\r\n      return matchProvince && matchDistrict && matchSearch;\r\n    });\r\n  }, [allStores, filters]);\r\n\r\n  // Select all / deselect all\r\n  const handleSelectAll = () => {\r\n    setSelectedStoreIds((prev) => {\r\n      const copy = new Set(prev);\r\n      filteredStores.forEach((s) => copy.add(s.id));\r\n      return copy;\r\n    });\r\n  };\r\n\r\n  const handleDeselectAll = () => {\r\n    setSelectedStoreIds((prev) => {\r\n      const copy = new Set(prev);\r\n      filteredStores.forEach((s) => copy.delete(s.id));\r\n      return copy;\r\n    });\r\n  };\r\n\r\n  return (\r\n    <BaseModal\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      title=\"Phân công cửa hàng cho chiến dịch\"\r\n      actions={\r\n        <>\r\n          <div className=\"modal-actions-button\">\r\n            <button\r\n              className=\"btn btn-danger btn-sm\"\r\n              onClick={handleDeselectAll}\r\n              disabled={loading}\r\n            >\r\n              Bỏ chọn tất cả\r\n            </button>\r\n            <button\r\n              className=\"btn btn-success btn-sm\"\r\n              onClick={handleSelectAll}\r\n              disabled={loading}\r\n            >\r\n              Chọn tất cả\r\n            </button>\r\n            <div>\r\n              Đã chọn: {selectedStoreIds.size} / {allStores.length}\r\n            </div>\r\n          </div>\r\n          <div className=\"modal-actions-button\">\r\n            <button\r\n              className=\"btn btn-danger btn-sm\"\r\n              onClick={onClose}\r\n              disabled={loading}\r\n            >\r\n              Hủy\r\n            </button>\r\n            <button\r\n              className=\"btn btn-primary btn-sm\"\r\n              onClick={handleSave}\r\n              disabled={loading}\r\n            >\r\n              {loading ? \"Đang lưu...\" : \"Lưu thay đổi\"}\r\n            </button>\r\n          </div>\r\n        </>\r\n      }\r\n    >\r\n      {error && <p className=\"alert alert-error\">{error}</p>}\r\n\r\n      {/* FilterBar */}\r\n      <FilterBar\r\n        filters={filterConfig}\r\n        values={filters}\r\n        onChange={(name, value) =>\r\n          setFilters((prev) => ({ ...prev, [name]: value }))\r\n        }\r\n        onReset={() =>\r\n          setFilters({ search: \"\", province: \"all\", district: \"\" })\r\n        }\r\n      />\r\n\r\n      {/* Store list */}\r\n      <div className=\"modal-content\">\r\n        {filteredStores.map((store) => (\r\n          <label key={store.id} className=\"modal-row\">\r\n            <input\r\n              type=\"checkbox\"\r\n              checked={selectedStoreIds.has(store.id)}\r\n              onChange={() => handleToggleStore(store.id)}\r\n            />\r\n            <div className=\"modal-label\">{store.store_code}</div>\r\n            <div className=\"modal-value\" id=\"address\">{store.address}</div>\r\n            <div className=\"modal-value\">\r\n              {getDistrictLabel(store.district, store.district_raw)}\r\n            </div>\r\n            <div className=\"modal-value\">{getProvinceLabel(store.district)}</div>\r\n          </label>\r\n        ))}\r\n      </div>\r\n    </BaseModal>\r\n  );\r\n}\r\n\r\nexport default AssignStoreModal;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}